webpackJsonp([46],{2766:function(m,h,f){var k=(h=f(25))&&h.__esModule?h:{"default":h},b=f(771),l=[],a=null,d=function(){var c=l.map(function(a){return a.itemId}).join(",");b.get("/api/blog-like-count/"+c).then(function(b){var c=b.data;l.forEach(function(a){c.hasOwnProperty(a.itemId)?a.resolve(c[a.itemId]):a.reject()});l=[];a=null})},e=function(b){return new k.default(function(g,e){l.push({itemId:b,resolve:g,reject:e});null!==a&&clearTimeout(a);a=setTimeout(d,100)})};m.exports={like:function(a){return b.post("/api/content-items/"+
a+"/sentiment/like").then(function(a){return a.data})},getLikeCount:function(a){return e(a)}}},4293:function(m,h,f){f(7);var k=f(2766);YUI.add("squarespace-simple-liking",function(b){var f=b.config.win.Static;b.Squarespace.SimpleLike={TEXT_LIKE_VERB_NONE:"No Likes",TEXT_LIKE_VERB_SINGULAR:"Like",TEXT_LIKE_VERB_PLURAL:"Likes",TEXT_LIKE_ACTIVATED:"You like this",TEXT_LIKE_SUGGEST:"Click to like",attached:!1,attach:function(){if(!this.attached){this.attached=!0;var a;try{localStorage&&((a=b.JSON.parse(localStorage.getItem("squarespace-likes")))||
(a={}),localStorage.setItem("squarespace-likes",b.JSON.stringify(a)))}catch(d){a={}}this.eventHandlers=[];var e=b.delegate("click",function(c){var g=c.currentTarget,d=g.getAttribute("data-item-id");if(d){for(c=0;5>c;++c)b.Squarespace.SimpleLike.burst(g);!g.hasClass("clicked")&&!g.hasClass("float")&&k.like(d).then(function(c){if(!0===c.commited){var e=parseInt(g.getAttribute("data-like-count"),10);g.setAttribute("data-like-count",e+1);b.Squarespace.SimpleLike.renderLikeCount(g);g.addClass("clicked");
try{localStorage&&(a[d]=!0,localStorage.setItem("squarespace-likes",b.JSON.stringify(a)))}catch(f){console.warn("Unable to save like to local storage: ",f)}}c.error&&(b.Squarespace.Utils.areCookiesEnabled()||b.config.win.alert("You need to enable cookies to be able to like something."))}.bind(this)).catch(function(a){console.error("Something went wrong liking!",a)})}},"body",".sqs-simple-like");this.eventHandlers.push(e);b.all(".sqs-simple-like").each(function(c){var d=c.getAttribute("data-item-id");
d&&(f.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled||c.remove(),a[d]&&c.addClass("clicked"),k.getLikeCount(d).then(function(a){c.setAttribute("data-like-count",a);b.Squarespace.SimpleLike.renderLikeCount(c)}).catch(function(){b.Squarespace.SimpleLike.renderLikeCount(c)}))})}},detach:function(){this.attached=!1;this.eventHandlers.forEach(function(a){a.detach()})},renderLikeCount:function(a){var b=a.getAttribute("data-item-id"),e=a.getAttribute("data-like-count");a=a.one(".like-count");b&&
a&&a.setContent(this.formatLikeText(e))},formatLikeText:function(a){return 0===a?b.Squarespace.SimpleLike.TEXT_LIKE_VERB_NONE:1===a?"1 "+b.Squarespace.SimpleLike.TEXT_LIKE_VERB_SINGULAR:a+" "+b.Squarespace.SimpleLike.TEXT_LIKE_VERB_PLURAL},burst:function(a){var d=a.cloneNode(!0);d.one(".like-count")&&d.one(".like-count").remove();var e=a.one(".like-icon");if(!e||"none"===e.getStyle("display"))e=a;d.setStyles({position:"absolute",left:e.getX()+"px",top:e.getY()+"px"});b.one(b.config.doc.body).append(d);
a=new b.Anim({node:d,duration:2,easing:b.Easing.easeOut});a.set("to",{curve:b.Squarespace.SimpleLike.randomCurve(d)});a.on("end",function(){this.get("node").remove()});a.run();d.removeClass("clicked");d.addClass("float")},randomCurve:function(a){var b=[],e=Math.floor(2*Math.random())?1:-1,c=Math.floor(2*Math.random())?1:-1,g=a.getX();a=a.getY();for(var f=0;3>f;++f)g+=Math.floor(30*Math.random())*e,a+=Math.floor(30*Math.random())*c,b.push([g,a]);return b}};b.config.win.Squarespace.onInitialize(b,function(){f.SQUARESPACE_CONTEXT.websiteSettings.simpleLikingEnabled&&
b.Squarespace.SimpleLike.attach()});b.config.win.Squarespace.onDestroy(b,function(){!0===b.Squarespace.SimpleLike.attached&&b.Squarespace.SimpleLike.detach()})},"1.0",{requires:["anim","json","node","squarespace-util"]})},7896:function(m,h,f){f(4293)}},[7896]);
